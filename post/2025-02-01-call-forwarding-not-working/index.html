<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Unable to Call Forward All (CFA) from Phones - Profit's Blog</title>
<meta name=description content="Issues in production are the gifts that keep on giving. Another strange one to look at as phones were unable to perform Call Fortwarding All (CFA) from phones, depending on which server they were registered to."><meta name=author content="Robert Profit"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Profit\u0027s Blog","url":"https:\/\/robertmprofit.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/robertmprofit.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/robertmprofit.com\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/robertmprofit.com\/post\/2025-02-01-call-forwarding-not-working\/","name":"Unable to call forward all ( cfa) from phones"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Robert Profit"},"headline":"Unable to Call Forward All (CFA) from Phones","description":"Issues in production are the gifts that keep on giving. Another strange one to look at as phones were unable to perform Call Fortwarding All (CFA) from phones, depending on which server they were registered to.\n","inLanguage":"en","wordCount":578,"datePublished":"2025-02-01T00:00:00\u002b00:00","dateModified":"2025-02-01T00:00:00\u002b00:00","image":"https:\/\/robertmprofit.com\/img\/resized_image_full_.jpeg","keywords":["CUCM, UC, Phones"],"mainEntityOfPage":"https:\/\/robertmprofit.com\/post\/2025-02-01-call-forwarding-not-working\/","publisher":{"@type":"Organization","name":"https:\/\/robertmprofit.com\/","logo":{"@type":"ImageObject","url":"https:\/\/robertmprofit.com\/img\/resized_image_full_.jpeg","height":60,"width":60}}}</script><meta property="og:title" content="Unable to Call Forward All (CFA) from Phones"><meta property="og:description" content="Issues in production are the gifts that keep on giving. Another strange one to look at as phones were unable to perform Call Fortwarding All (CFA) from phones, depending on which server they were registered to."><meta property="og:image" content="https://robertmprofit.com/img/resized_image_full_.jpeg"><meta property="og:url" content="https://robertmprofit.com/post/2025-02-01-call-forwarding-not-working/"><meta property="og:type" content="website"><meta property="og:site_name" content="Profit's Blog"><meta name=twitter:title content="Unable to Call Forward All (CFA) from Phones"><meta name=twitter:description content="Issues in production are the gifts that keep on giving. Another strange one to look at as phones were unable to perform Call Fortwarding All (CFA) from phones, depending on which server they were â€¦"><meta name=twitter:image content="https://robertmprofit.com/img/resized_image_full_.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=generator content="Hugo 0.124.1"><link rel=alternate href=https://robertmprofit.com/index.xml type=application/rss+xml title="Profit's Blog"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><link rel=stylesheet href=https://robertmprofit.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://robertmprofit.com/css/highlight.min.css><link rel=stylesheet href=https://robertmprofit.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-XC9S15QS4V"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XC9S15QS4V",{anonymize_ip:!1})}</script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://robertmprofit.com/>Profit's Blog</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Home href=/>Home</a></li><li><a title=About href=/page/about>About</a></li><li><a title=Tags href=/tags>Tags</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Profit's Blog" href=https://robertmprofit.com/><img class=avatar-img src=https://robertmprofit.com/img/resized_image_full_.jpeg alt="Profit's Blog"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Unable to Call Forward All (CFA) from Phones</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on February 1, 2025
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;578&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Robert Profit</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>Issues in production are the gifts that keep on giving. Another strange one to look at as phones were unable to perform Call Fortwarding All (CFA) from phones, depending on which server they were registered to.</p><h2 id=contents>Contents</h2><ul><li><a href=#contents>Contents</a></li><li><a href=#overview>Overview</a></li><li><a href=#components-used>Components Used</a></li><li><a href=#troubleshooting>Troubleshooting</a></li><li><a href=#issue>Issue</a></li><li><a href=#references>References</a></li></ul><h2 id=overview>Overview</h2><p>In a Call Manager cluster running 14SU3 that is split across the WAN, an interesting issue happened wherein phones registered to servers at Data Center 1 (DC1) were unable to set their physical phones to Call Forward All (CFA) when utilizing the soft key. Of course you can press the Call Forward key, and type in the forwarding number, but there were no audible tones or confirmation like there normally would be.</p><p>However, when phones were reigstered to DC2, everything worked as expected.<br>Also to note is that sometimes the CFA on the phone would be successful but would take up to five minutes to display success on the phone&rsquo;s screen.</p><h2 id=components-used>Components Used</h2><ul><li>CUCM Version 14SU3</li><li>88xx Phones</li></ul><h2 id=troubleshooting>Troubleshooting</h2><p>Here are the following items that were looked at in a normal round of check on a UC infrastructure.</p><ul><li><code>utils dbreplication runtimestate</code> and <code>utils dbreplication status</code><ul><li>The database output was good and there were no mismatched tables. The Round Trip Times (RTT) times were all 40ms or less between servers.</li></ul></li><li><code>utils ntp status</code><ul><li>Timing good and nothing to see here.</li></ul></li><li><code>utils diagnose test</code><ul><li>No process hogging all the cpu or memory.</li></ul></li><li>Computer Telephony Interface (CTI) logs yielded no results.</li></ul><h2 id=issue>Issue</h2><p>There was one thing that was very odd. Two servers in DC1 had their Call Manager service core. This means that something blocked the CUCM service from completing a task, consumned all the memory available for that process, and then forced a restart. This can happen with any number of processes in CUCM.</p><p>Upon analyzing the backtrace it seemed that the Signal Distriution Layer (SDL) process, the process that interacts with other process and is part of call processing, had incurred some issues.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#3  0x586d00fd n SdlMsgQueueCirc::enqueueSignal ... at SdlMsgQueueCirc.cpp:155
</span></span><span class=line><span class=cl>#4  0x586b3045 in enqueueSignal ... ccm/Common/Include/Sdl/SdlMsgQueue.hpp:66
</span></span><span class=line><span class=cl>#5  SdlThreadedProcess::inputSignal ... at SdlThreadedProcess.cpp:164
</span></span><span class=line><span class=cl>#6  0x58690e3b in SdlRouter::callProcess ... _sdlSignal=_sdlSignal@entry=0xbe368410, _deleteSignal 
</span></span></code></pre></div><p>After some ninja-like searching on the Internet, I came acorss the following Cisco Bug:
<a href=https://bst.cloudapps.cisco.com/bugsearch/bug/CSCwf68099>Normal Priority Queue Exahustion Due to Bulk Signals to Update ITL hash in DB</a></p><p>The core / backtrace matched what I had seen, and I was also able to confirm another telltale hitting this defect of numerous messages in the CUCM/SDL logs:</p><p><code>"Device type mismatch between the information contained in the device's TFTP configuration file and what is configured in Unified CM Administration for that device"</code></p><p>One of the workarounds is to remove devices from the network that are no longer in use. This had also happened recently to this customer environment. A lot of deprectaed phones were recently removed from the CUCM&rsquo;s database, but there is no gurantee they were also physically removed from the network in the various locations.</p><p>In this case, the large quantity of phones are continuously sending registration messages and eventually starving out the Signal Distribution Layer (SDL) queue. This causes User Facing Features (UFF) like call forwarding to not be processed by the server and &lsquo;mot work&rsquo;.</p><p>The path of least resistance was to patch/upgrade the servers to 14SU4 instead attempting to verify devices had been removed from the network. The 14SU4 patch modified the error handling of the SDL queue.</p><h2 id=references>References</h2><p><a href=https://bst.cloudapps.cisco.com/bugsearch/bug/CSCwf68099>Normal Priority Queue Exahustion Due to Bulk Signals to Update ITL hash in DB</a></p><div class=blog-tags><a href=https://robertmprofit.com/tags/cucm/>CUCM</a>&nbsp;
<a href=https://robertmprofit.com/tags/uc/>UC</a>&nbsp;
<a href=https://robertmprofit.com/tags/phones/>Phones</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2025-02-01-call-forwarding-not-working%2f&amp;text=Unable%20to%20Call%20Forward%20All%20%28CFA%29%20from%20Phones&amp;via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2frobertmprofit.com%2fpost%2f2025-02-01-call-forwarding-not-working%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2025-02-01-call-forwarding-not-working%2f&amp;title=Unable%20to%20Call%20Forward%20All%20%28CFA%29%20from%20Phones" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2025-02-01-call-forwarding-not-working%2f&amp;title=Unable%20to%20Call%20Forward%20All%20%28CFA%29%20from%20Phones" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2025-02-01-call-forwarding-not-working%2f&amp;title=Unable%20to%20Call%20Forward%20All%20%28CFA%29%20from%20Phones" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2025-02-01-call-forwarding-not-working%2f&amp;description=Unable%20to%20Call%20Forward%20All%20%28CFA%29%20from%20Phones" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section><h4 class=see-also>See also</h4><ul><li><a href=/post/2025-03-01-using-postman-for-cucm-updates/>U</a></li><li><a href=/post/2024-10-11-dial_peers_unencrypted_post_xe/>Dial Peers Unencrypted Post Upgrade</a></li><li><a href=/post/2024-08-19-ssm_on-prem_upgrade_issue_no_matching_mac_found/>SSM On-Prem Upgrade Issue: "No Matching MAC Found"</a></li><li><a href=/post/2024-07-22-satellite_server_almalinux/>Cisco Smart Satellite Manager (SSM) Server AlmaLinux Upgrade Overview</a></li></ul></article><ul class="pager blog-pager"><li class=previous><a href=https://robertmprofit.com/post/2024-10-11-dial_peers_unencrypted_post_xe/ data-toggle=tooltip data-placement=top title="Dial Peers Unencrypted Post Upgrade">&larr; Previous Post</a></li><li class=next><a href=https://robertmprofit.com/post/2025-03-01-using-postman-for-cucm-updates/ data-toggle=tooltip data-placement=top title=U>Next Post &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class=disclaimer><b>Disclaimer:</b> The opinions expressed herein are my own personal opinions and do not represent my employerâ€™s view in any way.</div></div><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:robert.profit82@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/RMProfit title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/robert-profit-a63b0785 title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.youtube.com/@robertprofit82 title=Youtube><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">Robert Profit
&nbsp;&bull;&nbsp;&copy;
2025
&nbsp;&bull;&nbsp;
<a href=https://robertmprofit.com/>Profit's Blog</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.124.1</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script src=https://code.jquery.com/jquery-3.7.0.slim.min.js integrity=sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script><script src=https://robertmprofit.com/js/main.js></script><script src=https://robertmprofit.com/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://robertmprofit.com/js/load-photoswipe.js></script></body></html>
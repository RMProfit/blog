<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Using TCL to Update E164 Pattern Maps - Profit's Blog</title>
<meta name=description content="This document details using Tool Command Language (TCL) for managing dynamic E164-pattern-maps on routers, focusing on migration scenarios with frequent, noncontiguous number block changes. It outlines syntax and methodologies to optimize handling these updates, ensuring seamless modifications during transitions."><meta name=author content="Robert Profit"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Profit\u0027s Blog","url":"https:\/\/robertmprofit.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/robertmprofit.com\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/robertmprofit.com\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/robertmprofit.com\/post\/2024-07-15-using-tcl-pattern-map\/","name":"Using tcl to update e164 pattern maps"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Robert Profit"},"headline":"Using TCL to Update E164 Pattern Maps","description":"This document details using Tool Command Language (TCL) for managing dynamic E164-pattern-maps on routers, focusing on migration scenarios with frequent, noncontiguous number block changes. It outlines syntax and methodologies to optimize handling these updates, ensuring seamless modifications during transitions.\n","inLanguage":"en","wordCount":1955,"datePublished":"2024-07-19T00:00:00\u002b00:00","dateModified":"2024-07-19T00:00:00\u002b00:00","image":"https:\/\/robertmprofit.com\/img\/resized_image_full_.jpeg","keywords":["CUBE, TCL, script, Automation"],"mainEntityOfPage":"https:\/\/robertmprofit.com\/post\/2024-07-15-using-tcl-pattern-map\/","publisher":{"@type":"Organization","name":"https:\/\/robertmprofit.com\/","logo":{"@type":"ImageObject","url":"https:\/\/robertmprofit.com\/img\/resized_image_full_.jpeg","height":60,"width":60}}}</script><meta property="og:title" content="Using TCL to Update E164 Pattern Maps"><meta property="og:description" content="This document details using Tool Command Language (TCL) for managing dynamic E164-pattern-maps on routers, focusing on migration scenarios with frequent, noncontiguous number block changes. It outlines syntax and methodologies to optimize handling these updates, ensuring seamless modifications during transitions."><meta property="og:image" content="https://robertmprofit.com/img/resized_image_full_.jpeg"><meta property="og:url" content="https://robertmprofit.com/post/2024-07-15-using-tcl-pattern-map/"><meta property="og:type" content="website"><meta property="og:site_name" content="Profit's Blog"><meta name=twitter:title content="Using TCL to Update E164 Pattern Maps"><meta name=twitter:description content="This document details using Tool Command Language (TCL) for managing dynamic E164-pattern-maps on routers, focusing on migration scenarios with frequent, noncontiguous number block changes. It â€¦"><meta name=twitter:image content="https://robertmprofit.com/img/resized_image_full_.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=generator content="Hugo 0.124.1"><link rel=alternate href=https://robertmprofit.com/index.xml type=application/rss+xml title="Profit's Blog"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css integrity=sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu crossorigin=anonymous><link rel=stylesheet href=https://robertmprofit.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://robertmprofit.com/css/highlight.min.css><link rel=stylesheet href=https://robertmprofit.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><script async src="https://www.googletagmanager.com/gtag/js?id=G-XC9S15QS4V"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XC9S15QS4V",{anonymize_ip:!1})}</script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=https://robertmprofit.com/>Profit's Blog</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Home href=/>Home</a></li><li><a title=About href=/page/about>About</a></li><li><a title=Tags href=/tags>Tags</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Profit's Blog" href=https://robertmprofit.com/><img class=avatar-img src=https://robertmprofit.com/img/resized_image_full_.jpeg alt="Profit's Blog"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Using TCL to Update E164 Pattern Maps</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on July 19, 2024
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;10&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1955&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Robert Profit</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>This document details using Tool Command Language (TCL) for managing dynamic E164-pattern-maps on routers, focusing on migration scenarios with frequent, noncontiguous number block changes. It outlines syntax and methodologies to optimize handling these updates, ensuring seamless modifications during transitions.</p><h2 id=contents>Contents</h2><ul><li><a href=#contents>Contents</a></li><li><a href=#introduction>Introduction</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#components-used>Components Used</a><ul><li><a href=#important>Important</a></li></ul></li><li><a href=#create-initial-pattern-map-file-and-load-into-memory>Create Initial Pattern-Map File and Load into Memory</a>
- <a href=#detailed-explanation>Detailed Explanation</a><ul><li><a href=#file-creation-example-with-data>File Creation Example with Data</a></li><li><a href=#append-data-to-an-existing-file>Append Data to an Existing File</a></li><li><a href=#example-create-the-file-and-remove-a-single-line-or-pattern>Example: Create the File and Remove a Single Line or Pattern</a><ul><li><a href=#creating-the-file>Creating the file</a></li></ul></li><li><a href=#removing-a-single-line-from-the-file>Removing a Single Line from the File</a></li><li><a href=#removing-entries>Removing Entries</a><ul><li><a href=#remove-a-single-line-from-an-existing-file>Remove a Single Line from an Existing File</a></li><li><a href=#detailed-explanation-1>Detailed Explanation</a></li></ul></li><li><a href=#remove-multiple-single-entries>Remove Multiple Single Entries</a><ul><li><a href=#detailed-explanation-2>Detailed Explanation</a></li></ul></li><li><a href=#use-regex-to-match-multiple-numbers>Use RegEx to Match Multiple Numbers</a></li><li><a href=#match-an-entry-with-wild-cards-present>Match an Entry with Wild Cards Present</a><ul><li><a href=#example-removing-multiple-lines-from-a-file>Example: Removing Multiple Lines from a File</a></li></ul></li></ul></li><li><a href=#appendix>Appendix</a><ul><li><a href=#result-of-not-reloading-the-modified-file>Result of Not Reloading the Modified File</a><ul><li><a href=#carriage-returns-are-acceptable-in-a-pattern-map>Carriage Returns are Acceptable in a Pattern-Map</a></li></ul></li></ul></li></ul><h2 id=introduction>Introduction</h2><p>This document provides a detailed overview of utilizing Tool Command Language (TCL) for the effective management of dynamic E164-pattern-maps stored locally on routers. It specifically addresses scenarios typical during migration phases, where number blocksâ€”often noncontiguousâ€”are frequently added to and removed from the system. The syntax and methodologies outlined herein are designed to optimize the handling of such changes, ensuring seamless updates and modifications during transitional periods.</p><h2 id=prerequisites>Prerequisites</h2><ul><li>Knowledge of the Cisco router command line interface (CLI).</li></ul><h2 id=components-used>Components Used</h2><ul><li>This information in this document is based on the Cisco Cloud Services Router (CSR) 16.12.04.</li><li>Variables are referenced in the body of this document and TCL syntax by <strong><code>$name</code></strong>.</li><li>Commands referenced in the body of this document are denoted by <strong><code>name</code></strong>.</li><li>Please see inline script #comments as well as the explanation of process steps.</li></ul><h4 id=important>Important</h4><blockquote><p>After modifying a pattern-map file, reload the file using:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=nx>load</span> <span class=o>&lt;</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span><span class=o>-</span><span class=nx>group</span><span class=o>-</span><span class=nx>id</span><span class=o>&gt;</span>
</span></span></code></pre></div><p>Please see the appendix for a detailed example of what occurs when this is not performed.</p></blockquote><h2 id=create-initial-pattern-map-file-and-load-into-memory>Create Initial Pattern-Map File and Load into Memory</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=err>#</span> <span class=nx>To</span> <span class=nx>create</span> <span class=nx>a</span> <span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=nx>file</span> <span class=nx>that</span> <span class=nx>exists</span> <span class=nx>on</span> <span class=nx>the</span> <span class=nx>flash</span><span class=o>:</span> <span class=k>of</span> <span class=nx>the</span> <span class=nx>router</span> <span class=nx>without</span> <span class=nx>having</span> <span class=nx>to</span> <span class=nx>re</span><span class=o>-</span><span class=kr>import</span> <span class=nx>via</span> <span class=nx>scp</span> <span class=nx>or</span> <span class=nx>tftp</span><span class=o>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Open</span> <span class=nx>the</span> <span class=nx>file</span> <span class=k>in</span> <span class=nx>write</span><span class=o>-</span><span class=nx>append</span> <span class=nx>mode</span> <span class=nx>and</span> <span class=nx>assign</span> <span class=nx>it</span> <span class=nx>to</span> <span class=nx>a</span> <span class=nx>variable</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:filename.cfg&#34;</span> <span class=nx>w</span><span class=o>+</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Write</span> <span class=nx>data</span> <span class=nx>to</span> <span class=nx>the</span> <span class=nx>file</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>paste</span> <span class=k>in</span> <span class=nx>list</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Close</span> <span class=nx>the</span> <span class=nx>file</span> <span class=nx>to</span> <span class=nx>ensure</span> <span class=nx>data</span> <span class=nx>is</span> <span class=nx>written</span> <span class=nx>and</span> <span class=nx>file</span> <span class=nx>integrity</span> <span class=nx>is</span> <span class=nx>maintained</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Exit</span> <span class=nx>TCL</span> <span class=nx>interpreter</span>
</span></span><span class=line><span class=cl><span class=nx>tclquit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Reference</span> <span class=nx>the</span> <span class=nx>configuration</span> <span class=nx>file</span> <span class=k>in</span> <span class=nx>the</span> <span class=nx>running</span> <span class=nx>config</span> <span class=p>(</span><span class=nx>Global</span> <span class=nx>Configuration</span> <span class=nx>Mode</span><span class=p>).</span>
</span></span><span class=line><span class=cl><span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nx>url</span> <span class=nx>bootflash</span><span class=o>:</span><span class=nx>filename</span><span class=p>.</span><span class=nx>cfg</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>Load</span> <span class=nx>the</span> <span class=nx>configuration</span> <span class=nx>file</span> <span class=p>(</span><span class=nx>Privleged</span> <span class=nx>Exec</span> <span class=nx>Mode</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=nx>load</span> <span class=mi>3</span>
</span></span></code></pre></div><h5 id=detailed-explanation>Detailed Explanation</h5><blockquote><p><strong>File Handling</strong>: The file is opened, and the handle is stored in a variable <strong>$file_handle</strong>. This is crucial for managing file operations correctly.<br><strong>Writing to the File</strong>: Uses puts with the file handle to write data into the file. Replace <code>paste in list</code> with the actual data you want to write.<br><strong>Closing the File</strong>: It&rsquo;s important to close the file handle with close to flush the buffer and ensure all data is properly written to the flash memory.
<strong>Exiting TCL</strong>: The command tclquit is used to correctly exit the TCL interpreter.</p></blockquote><h4 id=file-creation-example-with-data>File Creation Example with Data</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>tclsh</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Open</span> <span class=nx>the</span> <span class=nx>file</span> <span class=k>in</span> <span class=nx>write</span><span class=o>-</span><span class=nx>append</span> <span class=nx>mode</span> <span class=nx>and</span> <span class=nx>assign</span> <span class=nx>it</span> <span class=nx>to</span> <span class=nx>a</span> <span class=nx>variable</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=o>+</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Write</span> <span class=nx>data</span> <span class=nx>to</span> <span class=nx>the</span> <span class=nx>file</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Close</span> <span class=nx>the</span> <span class=nx>file</span> <span class=nx>to</span> <span class=nx>ensure</span> <span class=nx>data</span> <span class=nx>is</span> <span class=nx>written</span> <span class=nx>and</span> <span class=nx>file</span> <span class=nx>integrity</span> <span class=nx>is</span> <span class=nx>maintained</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span></code></pre></div><h4 id=append-data-to-an-existing-file>Append Data to an Existing File</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=err>#</span><span class=nx>Append</span> <span class=nx>data</span> <span class=nx>to</span> <span class=nx>the</span> <span class=nx>end</span> <span class=k>of</span> <span class=nx>an</span> <span class=nx>existing</span> <span class=nx>file</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>a</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=mi>8138268888</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=p>{</span><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]}</span> <span class=err>#</span><span class=nx>Note</span> <span class=nx>the</span> <span class=nx>syntax</span> <span class=k>for</span> <span class=nx>wild</span> <span class=nx>cards</span> <span class=k>for</span> <span class=nx>appending</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>These</span> <span class=nx>steps</span> <span class=nx>are</span> <span class=nx>used</span> <span class=nx>only</span> <span class=k>if</span> <span class=nx>checking</span> <span class=nx>the</span> <span class=nx>contents</span> <span class=k>while</span> <span class=k>in</span> <span class=nx>TCL</span> <span class=nx>shell</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_data</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_data</span>
</span></span></code></pre></div><h4 id=example-create-the-file-and-remove-a-single-line-or-pattern>Example: Create the File and Remove a Single Line or Pattern</h4><h5 id=creating-the-file>Creating the file</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>tclsh</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=o>+</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=p>{</span><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=mi>8138263333</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_data</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>puts</span> <span class=nx>$file_data</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span></code></pre></div><h4 id=removing-a-single-line-from-the-file>Removing a Single Line from the File</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_contents</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>lines</span> <span class=p>[</span><span class=nx>split</span> <span class=nx>$file_contents</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span> <span class=mi>8138262222</span> <span class=mi>8138263333</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>new_lines</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>foreach</span> <span class=nx>line</span> <span class=nx>$lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=k>if</span> <span class=p>{</span><span class=o>!</span><span class=p>[</span><span class=nx>string</span> <span class=nx>match</span> <span class=s2>&#34;8138263333&#34;</span> <span class=nx>$line</span><span class=p>]}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=nx>lappend</span> <span class=nx>new_lines</span> <span class=nx>$line</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>new_file_contents</span> <span class=p>[</span><span class=nx>join</span> <span class=nx>$new_lines</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=nx>$new_file_contents</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_data</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>puts</span> <span class=nx>$file_data</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>tclquit</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>more</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span></code></pre></div><h4 id=removing-entries>Removing Entries</h4><h5 id=remove-a-single-line-from-an-existing-file>Remove a Single Line from an Existing File</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=err>#</span> <span class=nx>Open</span> <span class=nx>the</span> <span class=nx>file</span> <span class=k>for</span> <span class=nx>reading</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_contents</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Split</span> <span class=nx>the</span> <span class=nx>content</span> <span class=nx>into</span> <span class=nx>lines</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>lines</span> <span class=p>[</span><span class=nx>split</span> <span class=nx>$file_contents</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Initialize</span> <span class=nx>an</span> <span class=nx>empty</span> <span class=nx>list</span> <span class=nx>to</span> <span class=nx>hold</span> <span class=nx>the</span> <span class=nx>filtered</span> <span class=nx>lines</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_lines</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Loop</span> <span class=nx>through</span> <span class=nx>each</span> <span class=nx>line</span> <span class=nx>and</span> <span class=nx>add</span> <span class=nx>it</span> <span class=nx>to</span> <span class=nx>new_lines</span> <span class=k>if</span> <span class=nx>it</span> <span class=nx>does</span> <span class=nx>not</span> <span class=nx>match</span> <span class=nx>the</span> <span class=nx>pattern</span>
</span></span><span class=line><span class=cl><span class=nx>foreach</span> <span class=nx>line</span> <span class=nx>$lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>{</span><span class=o>!</span><span class=p>[</span><span class=nx>string</span> <span class=nx>match</span> <span class=s2>&#34;8138263333&#34;</span> <span class=nx>$line</span><span class=p>]}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>lappend</span> <span class=nx>new_lines</span> <span class=nx>$line</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Join</span> <span class=nx>the</span> <span class=nx>filtered</span> <span class=nx>lines</span> <span class=nx>back</span> <span class=nx>into</span> <span class=nx>a</span> <span class=nx>single</span> <span class=nx>string</span> <span class=kd>with</span> <span class=nx>newline</span> <span class=nx>characters</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_file_contents</span> <span class=p>[</span><span class=nx>join</span> <span class=nx>$new_lines</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Open</span> <span class=nx>the</span> <span class=nx>file</span> <span class=k>for</span> <span class=nx>writing</span> <span class=p>(</span><span class=k>this</span> <span class=nx>will</span> <span class=nx>overwrite</span> <span class=nx>the</span> <span class=nx>existing</span> <span class=nx>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=nx>$new_file_contents</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Exit</span> <span class=nx>the</span> <span class=nx>TCL</span> <span class=nx>interpreter</span>
</span></span><span class=line><span class=cl><span class=nx>tclquit</span>
</span></span></code></pre></div><h5 id=detailed-explanation-1>Detailed Explanation</h5><blockquote><p><strong>Patterns List</strong>: You define a list of strings <code>$patterns</code>. Each element in the list represents a pattern that you want to filter out from the file.<br><strong>Reading the File</strong>: Open the file, read its contents into <code>$file_contents</code>, and close the file.<br><strong>Filtering Process</strong>: Split the file contents into lines. For each line, check against each pattern in the list. If any pattern matches, mark the line to be excluded with <code>include_line set to 0</code>.<br><strong>Reconstruction</strong>: After filtering, the remaining lines $new_lines are joined back into a single string and written back to the file, overwriting the previous content.<br><strong>Performance Consideration</strong>: This method is straightforward and effective for small to medium-sized files. For very large files, consider processing in chunks.</p></blockquote><h4 id=remove-multiple-single-entries>Remove Multiple Single Entries</h4><p>Due to the CLI character buffer limitation, longer lists of patterns to be removed must have the set patterns command broken up after approximately 18 ten-digit numbers. You can achieve this by inserting carriage returns to distribute the numbers across multiple lines while setting the $patterns variable.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>tclsh</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Define</span> <span class=nx>a</span> <span class=nx>list</span> <span class=k>of</span> <span class=nx>patterns</span> <span class=nx>to</span> <span class=nx>remove</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>patterns</span> <span class=p>{</span><span class=s2>&#34;8138265555&#34;</span> <span class=s2>&#34;8138266666&#34;</span> <span class=s2>&#34;8138267777&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Open</span> <span class=nx>the</span> <span class=nx>file</span> <span class=k>for</span> <span class=nx>reading</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_contents</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Split</span> <span class=nx>the</span> <span class=nx>content</span> <span class=nx>into</span> <span class=nx>lines</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>lines</span> <span class=p>[</span><span class=nx>split</span> <span class=nx>$file_contents</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Initialize</span> <span class=nx>an</span> <span class=nx>empty</span> <span class=nx>list</span> <span class=nx>to</span> <span class=nx>hold</span> <span class=nx>the</span> <span class=nx>filtered</span> <span class=nx>lines</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_lines</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Loop</span> <span class=nx>through</span> <span class=nx>each</span> <span class=nx>line</span>
</span></span><span class=line><span class=cl><span class=nx>foreach</span> <span class=nx>line</span> <span class=nx>$lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>include_line</span> <span class=mi>1</span> <span class=err>#</span> <span class=nx>Assume</span> <span class=nx>the</span> <span class=nx>line</span> <span class=nx>should</span> <span class=nx>be</span> <span class=nx>included</span> <span class=nx>unless</span> <span class=nx>a</span> <span class=nx>pattern</span> <span class=nx>matches</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Check</span> <span class=nx>each</span> <span class=nx>pattern</span> <span class=nx>against</span> <span class=nx>the</span> <span class=nx>current</span> <span class=nx>line</span>
</span></span><span class=line><span class=cl><span class=nx>foreach</span> <span class=nx>pattern</span> <span class=nx>$patterns</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>{[</span><span class=nx>string</span> <span class=nx>match</span> <span class=s2>&#34;*$pattern*&#34;</span> <span class=nx>$line</span><span class=p>]}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>include_line</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=k>break</span> <span class=err>#</span> <span class=nx>If</span> <span class=nx>any</span> <span class=nx>pattern</span> <span class=nx>matches</span><span class=p>,</span> <span class=nx>exclude</span> <span class=nx>the</span> <span class=nx>line</span> <span class=nx>and</span> <span class=nx>stop</span> <span class=nx>checking</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>If</span> <span class=nx>include_line</span> <span class=nx>is</span> <span class=nx>still</span> <span class=mi>1</span><span class=p>,</span> <span class=nx>append</span> <span class=nx>the</span> <span class=nx>line</span> <span class=nx>to</span> <span class=nx>new_lines</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>{</span><span class=nx>$include_line</span><span class=p>}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>lappend</span> <span class=nx>new_lines</span> <span class=nx>$line</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Join</span> <span class=nx>the</span> <span class=nx>filtered</span> <span class=nx>lines</span> <span class=nx>back</span> <span class=nx>into</span> <span class=nx>a</span> <span class=nx>single</span> <span class=nx>string</span> <span class=kd>with</span> <span class=nx>newline</span> <span class=nx>characters</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_file_contents</span> <span class=p>[</span><span class=nx>join</span> <span class=nx>$new_lines</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Open</span> <span class=nx>the</span> <span class=nx>file</span> <span class=k>for</span> <span class=nx>writing</span> <span class=p>(</span><span class=k>this</span> <span class=nx>will</span> <span class=nx>overwrite</span> <span class=nx>the</span> <span class=nx>existing</span> <span class=nx>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=nx>$new_file_contents</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Exit</span> <span class=nx>the</span> <span class=nx>TCL</span> <span class=nx>interpreter</span>
</span></span><span class=line><span class=cl><span class=nx>tclquit</span>
</span></span></code></pre></div><h5 id=detailed-explanation-2>Detailed Explanation</h5><blockquote><p><strong>Patterns List</strong>: The patterns are defined as a list of strings $patterns. This is a straightforward way to store multiple patterns that need to be removed.
<strong>Loop Through Each Line</strong>: For each line in the file, a nested loop checks each pattern against the current line.<br><strong>Filtering</strong>: The inner loop stops checking patterns for the current line once a match is found, setting <code>include_line to 0</code>. Only lines that aren&rsquo;t matched by any pattern are appended to <code>$new_lines</code>.<br><strong>Reconstruction</strong>: The remaining lines are joined back into a single string and written back to the file.</p></blockquote><h4 id=use-regex-to-match-multiple-numbers>Use RegEx to Match Multiple Numbers</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>set</span> <span class=nx>pattern</span> <span class=p>{</span><span class=mi>813826333</span><span class=p>[</span><span class=mi>4</span><span class=o>-</span><span class=mi>6</span><span class=p>]}</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_contents</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>lines</span> <span class=p>[</span><span class=nx>split</span> <span class=nx>$file_contents</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_lines</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>foreach</span> <span class=nx>line</span> <span class=nx>$lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=nx>Check</span> <span class=k>if</span> <span class=nx>the</span> <span class=nx>line</span> <span class=nx>matches</span> <span class=nx>the</span> <span class=nx>regular</span> <span class=nx>expression</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>{</span><span class=o>!</span><span class=p>[</span><span class=nx>regexp</span> <span class=nx>$pattern</span> <span class=nx>$line</span><span class=p>]}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>lappend</span> <span class=nx>new_lines</span> <span class=nx>$line</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_file_contents</span> <span class=p>[</span><span class=nx>join</span> <span class=nx>$new_lines</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=nx>$new_file_contents</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>tclquit</span>
</span></span></code></pre></div><h4 id=match-an-entry-with-wild-cards-present>Match an Entry with Wild Cards Present</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>set</span> <span class=nx>pattern</span> <span class=p>{</span><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]}</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_contents</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>lines</span> <span class=p>[</span><span class=nx>split</span> <span class=nx>$file_contents</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_lines</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>foreach</span> <span class=nx>line</span> <span class=nx>$lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>{</span><span class=o>!</span><span class=p>[</span><span class=nx>string</span> <span class=nx>equal</span> <span class=nx>$pattern</span> <span class=nx>$line</span><span class=p>]}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=nx>lappend</span> <span class=nx>new_lines</span> <span class=nx>$line</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>new_file_contents</span> <span class=p>[</span><span class=nx>join</span> <span class=nx>$new_lines</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=nx>$new_file_contents</span>
</span></span><span class=line><span class=cl><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>tclquit</span>
</span></span></code></pre></div><h5 id=example-removing-multiple-lines-from-a-file>Example: Removing Multiple Lines from a File</h5><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>patterns</span> <span class=p>{</span><span class=s2>&#34;8138265555&#34;</span> <span class=s2>&#34;8138266666&#34;</span> <span class=s2>&#34;8138267777&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>r</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_contents</span> <span class=p>[</span><span class=nx>read</span> <span class=nx>$file_handle</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>8138264444</span>
</span></span><span class=line><span class=cl><span class=mi>8138265555</span>
</span></span><span class=line><span class=cl><span class=mi>8138266666</span>
</span></span><span class=line><span class=cl><span class=mi>8138267777</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>lines</span> <span class=p>[</span><span class=nx>split</span> <span class=nx>$file_contents</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span> <span class=mi>8138262222</span> <span class=mi>8138263333</span> <span class=mi>8138264444</span> <span class=mi>8138265555</span> <span class=mi>8138266666</span> <span class=mi>8138267777</span> <span class=p>{}</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>new_lines</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>foreach</span> <span class=nx>line</span> <span class=nx>$lines</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span> <span class=nx>set</span> <span class=nx>include_line</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=nx>foreach</span> <span class=nx>pattern</span> <span class=nx>$patterns</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span> <span class=k>if</span> <span class=p>{[</span><span class=nx>string</span> <span class=nx>match</span> <span class=s2>&#34;*$pattern*&#34;</span> <span class=nx>$line</span><span class=p>]}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span> <span class=nx>set</span> <span class=nx>include_line</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=k>break</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span> <span class=k>if</span> <span class=p>{</span><span class=nx>$include_line</span><span class=p>}</span> <span class=p>{</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span> <span class=nx>lappend</span> <span class=nx>new_lines</span> <span class=nx>$line</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=o>+&gt;</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>new_file_contents</span> <span class=p>[</span><span class=nx>join</span> <span class=nx>$new_lines</span> <span class=s2>&#34;\n&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>8138264444</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>w</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=nx>$new_file_contents</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>tclquit</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>more</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>8138264444</span>
</span></span></code></pre></div><h2 id=appendix>Appendix</h2><h3 id=result-of-not-reloading-the-modified-file>Result of Not Reloading the Modified File</h3><p>The following is what occurs when the local e164-pattern-map file is edited but subsequently NOT reloaded into the router&rsquo;s memory.
The initial file has existing entries and the router is aware of their presence in the raw file via flash: as well as the existence of valid dial plan numbers.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>more</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>-----------------------------------------</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>has</span> <span class=mi>4</span> <span class=nx>entries</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>is</span> <span class=nx>populated</span> <span class=nx>from</span> <span class=nx>url</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>Map</span> <span class=nx>is</span> <span class=nx>valid</span><span class=p>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>E164</span> <span class=nx>pattern</span>
</span></span><span class=line><span class=cl><span class=o>-------------------</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>dialplan</span> <span class=nx>number</span> <span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=nx>Macro</span> <span class=nx>Exp</span><span class=p>.</span><span class=o>:</span> <span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=nx>VoiceOverIpPeer1</span>
</span></span><span class=line><span class=cl><span class=nx>peer</span> <span class=nx>type</span> <span class=o>=</span> <span class=nx>voice</span><span class=p>,</span> <span class=nx>system</span> <span class=k>default</span> <span class=nx>peer</span> <span class=o>=</span> <span class=nx>FALSE</span><span class=p>,</span> <span class=nx>information</span> <span class=nx>type</span> <span class=o>=</span> <span class=nx>voice</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=o>/</span><span class=nx>output</span> <span class=nx>omitted</span> <span class=k>for</span> <span class=nx>brevity</span><span class=o>/</span>
</span></span></code></pre></div><p>The e164-pattern-map file is then updated with an additional entry.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>tclsh</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>set</span> <span class=nx>file_handle</span> <span class=p>[</span><span class=nx>open</span> <span class=s2>&#34;flash:map.cfg&#34;</span> <span class=nx>a</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>file10</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>puts</span> <span class=nx>$file_handle</span> <span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>close</span> <span class=nx>$file_handle</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=p>(</span><span class=nx>tcl</span><span class=p>)</span><span class=err>#</span><span class=nx>tclquit</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span>
</span></span></code></pre></div><p>The voice process DOES NOT see the newly added number under the dialplan or pattern-map.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>dialplan</span> <span class=nx>number</span> <span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=nx>Macro</span> <span class=nx>Exp</span><span class=p>.</span><span class=o>:</span> <span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=nx>No</span> <span class=nx>match</span><span class=p>,</span> <span class=nx>result</span><span class=o>=-</span><span class=mi>1</span><span class=p>(</span><span class=nx>NO_MATCH</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>-----------------------------------------</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>has</span> <span class=mi>4</span> <span class=nx>entries</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>is</span> <span class=nx>populated</span> <span class=nx>from</span> <span class=nx>url</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>Map</span> <span class=nx>is</span> <span class=nx>valid</span><span class=p>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>E164</span> <span class=nx>pattern</span>
</span></span><span class=line><span class=cl><span class=o>-------------------</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]</span>
</span></span></code></pre></div><p>However, the newly added entry is present in the file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>more</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=mi>8138267777</span>
</span></span></code></pre></div><p>To correct this, the file is then reloaded into memory.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=nx>load</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nx>url</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span> <span class=nx>loaded</span> <span class=nx>successfully</span>
</span></span><span class=line><span class=cl><span class=nx>All</span> <span class=nx>e164</span> <span class=nx>patterns</span> <span class=nx>are</span> <span class=nx>valid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>-----------------------------------------</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>has</span> <span class=mi>5</span> <span class=nx>entries</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>is</span> <span class=nx>populated</span> <span class=nx>from</span> <span class=nx>url</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>Map</span> <span class=nx>is</span> <span class=nx>valid</span><span class=p>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>E164</span> <span class=nx>pattern</span>
</span></span><span class=line><span class=cl><span class=o>-------------------</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=mi>813826333</span><span class=p>[</span><span class=mi>567</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>dialplan</span> <span class=nx>number</span> <span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=nx>Macro</span> <span class=nx>Exp</span><span class=p>.</span><span class=o>:</span> <span class=mi>8138267777</span>
</span></span><span class=line><span class=cl><span class=nx>VoiceOverIpPeer1</span>
</span></span><span class=line><span class=cl><span class=nx>peer</span> <span class=nx>type</span> <span class=o>=</span> <span class=nx>voice</span><span class=p>,</span> <span class=nx>system</span> <span class=k>default</span> <span class=nx>peer</span> <span class=o>=</span> <span class=nx>FALSE</span><span class=p>,</span> <span class=nx>information</span> <span class=nx>type</span> <span class=o>=</span> <span class=nx>voice</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=err>#</span> <span class=o>/</span><span class=nx>output</span> <span class=nx>omitted</span> <span class=k>for</span> <span class=nx>brevity</span><span class=o>/</span>
</span></span></code></pre></div><h4 id=carriage-returns-are-acceptable-in-a-pattern-map>Carriage Returns are Acceptable in a Pattern-Map</h4><p>In the following output, the pattern map is valid even though viewing it from the flash directly displays empty lines.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=err>#</span> <span class=nx>Pattern</span> <span class=nx>Map</span> <span class=nx>Validation</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>show</span> <span class=nx>voice</span> <span class=kr>class</span> <span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=nx>e164</span><span class=o>-</span><span class=nx>pattern</span><span class=o>-</span><span class=nx>map</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=o>-----------------------------------------</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>has</span> <span class=mi>7</span> <span class=nx>entries</span>
</span></span><span class=line><span class=cl><span class=nx>It</span> <span class=nx>is</span> <span class=nx>populated</span> <span class=nx>from</span> <span class=nx>url</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nx>Map</span> <span class=nx>is</span> <span class=nx>valid</span><span class=p>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>E164</span> <span class=nx>pattern</span>
</span></span><span class=line><span class=cl><span class=o>-------------------</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>8138263334</span>
</span></span><span class=line><span class=cl><span class=mi>8138263335</span>
</span></span><span class=line><span class=cl><span class=mi>8138263336</span>
</span></span><span class=line><span class=cl><span class=mi>8138264444</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=err>#</span><span class=nx>Viewing</span> <span class=nx>the</span> <span class=nx>file</span> <span class=nx>directly</span> <span class=nx>from</span> <span class=nx>Flash</span>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span><span class=nx>more</span> <span class=nx>flash</span><span class=o>:</span><span class=nx>map</span><span class=p>.</span><span class=nx>cfg</span>
</span></span><span class=line><span class=cl><span class=mi>8138261111</span>
</span></span><span class=line><span class=cl><span class=mi>8138262222</span>
</span></span><span class=line><span class=cl><span class=mi>8138263333</span>
</span></span><span class=line><span class=cl><span class=mi>8138264444</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=mi>8138263334</span>
</span></span><span class=line><span class=cl><span class=mi>8138263335</span>
</span></span><span class=line><span class=cl><span class=mi>8138263336</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>vCUBE1</span><span class=err>#</span>
</span></span></code></pre></div><div class=blog-tags><a href=https://robertmprofit.com/tags/cube/>CUBE</a>&nbsp;
<a href=https://robertmprofit.com/tags/tcl/>TCL</a>&nbsp;
<a href=https://robertmprofit.com/tags/script/>script</a>&nbsp;
<a href=https://robertmprofit.com/tags/automation/>Automation</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2024-07-15-using-tcl-pattern-map%2f&amp;text=Using%20TCL%20to%20Update%20E164%20Pattern%20Maps&amp;via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2frobertmprofit.com%2fpost%2f2024-07-15-using-tcl-pattern-map%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2024-07-15-using-tcl-pattern-map%2f&amp;title=Using%20TCL%20to%20Update%20E164%20Pattern%20Maps" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2024-07-15-using-tcl-pattern-map%2f&amp;title=Using%20TCL%20to%20Update%20E164%20Pattern%20Maps" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2024-07-15-using-tcl-pattern-map%2f&amp;title=Using%20TCL%20to%20Update%20E164%20Pattern%20Maps" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2frobertmprofit.com%2fpost%2f2024-07-15-using-tcl-pattern-map%2f&amp;description=Using%20TCL%20to%20Update%20E164%20Pattern%20Maps" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section><h4 class=see-also>See also</h4><ul><li><a href=/post/2025-05-09-using-postman-for-cucm-updates/>Directory Number Update with Postman</a></li><li><a href=/post/2024-10-11-dial_peers_unencrypted_post_xe/>Dial Peers Unencrypted Post Upgrade</a></li></ul></article><ul class="pager blog-pager"><li class=next><a href=https://robertmprofit.com/post/2024-07-22-satellite_server_almalinux/ data-toggle=tooltip data-placement=top title="Cisco Smart Satellite Manager (SSM) Server AlmaLinux Upgrade Overview">Next Post &rarr;</a></li></ul><div id=cusdis_thread data-host=https://cusdis.com data-app-id=d88e9a4a-fb56-4b17-8d1e-107e72eff23b data-page-id=https://robertmprofit.com/post/2024-07-15-using-tcl-pattern-map/ data-page-url=https://robertmprofit.com/post/2024-07-15-using-tcl-pattern-map/ data-page-title="Using TCL to Update E164 Pattern Maps" data-theme=auto></div><script async defer src=https://cusdis.com/js/cusdis.es.js></script></div></div></div><footer><div class=container><div class=row><div class=disclaimer><b>Disclaimer:</b> The opinions expressed herein are my own personal opinions and do not represent my employerâ€™s view in any way.</div></div><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:robert.profit82@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/RMProfit title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/robert-profit-a63b0785 title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.youtube.com/@robertprofit82 title=Youtube><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-youtube fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">Robert Profit
&nbsp;&bull;&nbsp;&copy;
2025
&nbsp;&bull;&nbsp;
<a href=https://robertmprofit.com/>Profit's Blog</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.124.1</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload=renderMathInElement(document.body)></script><script src=https://code.jquery.com/jquery-3.7.0.slim.min.js integrity=sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js integrity=sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd crossorigin=anonymous></script><script src=https://robertmprofit.com/js/main.js></script><script src=https://robertmprofit.com/js/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://robertmprofit.com/js/load-photoswipe.js></script></body></html>